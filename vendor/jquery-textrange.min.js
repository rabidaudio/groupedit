(function(h){var d,g={get:function(a){return f[d].get.apply(this,[a])},set:function(a,b){var c=parseInt(a),e=parseInt(b);"undefined"===typeof a?c=0:0>a&&(c=this.val().length+c);e="undefined"===typeof b?this.val().length:0<=b?c+e:this.val().length+e;f[d].set.apply(this,[c,e]);return this},setcursor:function(a){return this.textrange("set",a,0)},replace:function(a){f[d].replace.apply(this,[a]);return this},insert:function(a){return this.textrange("replace",a)}},f={xul:{get:function(a){var b={position:this[0].selectionStart,
start:this[0].selectionStart,end:this[0].selectionEnd,length:this[0].selectionEnd-this[0].selectionStart,text:this.val().substring(this[0].selectionStart,this[0].selectionEnd)};return"undefined"===typeof a?b:b[a]},set:function(a,b){this[0].selectionStart=a;this[0].selectionEnd=b},replace:function(a){var b=this[0].selectionStart;this.val(this.val().substring(0,this[0].selectionStart)+a+this.val().substring(this[0].selectionEnd,this.val().length));this[0].selectionStart=b;this[0].selectionEnd=b+a.length}},
msie:{get:function(a){a=document.selection.createRange();if("undefined"===typeof a)return{position:0,start:0,end:this[0].val().length,length:this[0].val().length,text:this.val()};var b=this[0].createTextRange(),c=b.duplicate();b.moveToBookmark(a.getBookmark());c.setEndPoint("EndToStart",b);return{position:c.text.length,start:c.text.length,end:c.text.length+a.text.length,length:a.text.length,text:a.text}},set:function(a,b){var c=this[0].createTextRange();if("undefined"===typeof c)return this;"undefined"!==
typeof a&&(c.moveStart("character",a),c.collapse());"undefined"!==typeof b&&c.moveEnd("character",b-a);c.select()},replace:function(a){document.selection.createRange().text=a}}};h.fn.textrange=function(a){"undefined"===typeof d&&(d="selectionStart"in this[0]?"xul":document.selection?"msie":"unknown");if("unknown"===d)return this;document.activeElement!==this[0]&&this[0].focus();if("undefined"===typeof a||"string"!==typeof a)return g.get.apply(this);if("function"===typeof g[a])return g[a].apply(this,
Array.prototype.slice.call(arguments,1));h.error("Method "+a+" does not exist in jQuery.textrange")}})(jQuery);
